{"version":3,"sources":["uni-app:///main.js",null,"webpack:///D:/uniapp/uni-app-study/hm-shop/pages/cart/cart.vue?75b2","webpack:///D:/uniapp/uni-app-study/hm-shop/pages/cart/cart.vue?5ec6","webpack:///D:/uniapp/uni-app-study/hm-shop/pages/cart/cart.vue?2b6b","uni-app:///pages/cart/cart.vue","webpack:///D:/uniapp/uni-app-study/hm-shop/pages/cart/cart.vue?fe61","webpack:///D:/uniapp/uni-app-study/hm-shop/pages/cart/cart.vue?3485"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;;;AAGA;AACA,0F,8FAHA;AACAA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC,CAGAC,UAAU,CAACC,aAAD,CAAV,C;;;;;;;;;;;;;ACLA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6H;AAC7H;AACwD;AACL;AACsC;;;AAGzF;AAC+K;AAC/K,gBAAgB,sLAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,2FAAM;AACR,EAAE,oGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,+FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,6SAEN;AACP,KAAK;AACL;AACA,aAAa,iSAEN;AACP,KAAK;AACL;AACA,aAAa,uSAEN;AACP,KAAK;AACL;AACA,aAAa,qUAEN;AACP,KAAK;AACL;AACA,aAAa,6SAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC1DA;AAAA;AAAA;AAAA;AAA6pB,CAAgB,2pBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC+FjrB,gG;AACA;AACA,MADA,kBACA;AACA;AACA,mBADA,EACA;AACA,sBAFA,EAEA;AACA,wBAHA,EAGA;AACA;AACA,6BADA;AAEA,wBAFA;AAGA,sBAHA,EAJA;AAQA;AACA,oBATA,CASA;AATA;AAWA,GAbA;AAcA;AACA;AACA,eAFA,yBAEA;AACA,8BADA,CACA;AACA,8BAFA,CAEA;AACA;AACA;AACA;AACA;AACA,SAHA;AAIA,OALA;AAMA;AACA;AACA,KAbA;AAcA;AACA,cAfA,wBAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAJA;AAKA,OANA;AAOA;AACA,KAzBA;AA0BA;AACA,iBA3BA,2BA2BA;AACA,uBADA,CACA;AACA,uBAFA,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAPA;AAQA,OATA;AAUA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KA7CA,EAdA;;AA6DA;;;;AAIA,QAjEA,oBAiEA;AACA;AACA;AACA;AACA;AACA;AACA,GAvEA;AAwEA;AACA;AACA;AACA,WAHA,qBAGA;AACA;AACA,yCADA,GADA,SACA,GADA;;AAIA,yBAJA,GAIA,EAJA;AAKA;AACA;AACA;AACA;AACA;AACA,mCADA;AAEA,2CAFA;AAGA,+CAHA;AAIA,sEAJA;AAKA,2CALA;AAMA,uCANA;AAOA,wCAPA;AAQA,wCARA;;AAUA;AACA,mBAZA;AAaA;AACA,yBADA;AAEA,qCAFA;AAGA,sCAHA;AAIA,sCAJA;AAKA,wCALA;;AAOA,iBA5BA;AA6BA,KAhCA;AAiCA;AACA,eAlCA,uBAkCA,UAlCA,EAkCA;AACA;AACA;AACA;AACA;AACA,SAFA;AAGA,OALA,MAKA;AACA;AACA;AACA;AACA,SAFA;AAGA;AACA,KA9CA;AA+CA;AACA,eAhDA,uBAgDA,UAhDA,EAgDA,UAhDA,EAgDA;AACA;AACA;AACA,4BAFA,CAEA;AACA;AACA;AACA;AACA;AACA,SAJA;AAKA;AACA,OATA,MASA;AACA;AACA,6BAFA,CAEA;AACA;AACA;AACA;AACA;AACA,SAJA;AAKA;AACA;AACA,KApEA;AAqEA;AACA,aAtEA,uBAsEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAFA;AAGA,SALA;AAMA,OAPA,MAOA;AACA;AACA;AACA;AACA;AACA,WAFA;AAGA,SALA;AAMA;AACA,KAvFA;AAwFA;AACA,cAzFA,sBAyFA,EAzFA,EAyFA;AACA,0CADA;AAEA;AACA,wCADA;AAEA,kCAFA;AAGA,kIAHA,GAFA,SAEA,GAFA;;AAOA;AACA;AACA,iBATA;AAUA,KAnGA;AAoGA;AACA,eArGA,uBAqGA,EArGA,EAqGA;AACA,0CADA;AAEA;AACA,wCADA;AAEA,kCAFA;AAGA,kOAHA,GAFA,SAEA,GAFA;;AAOA;AACA;AACA,iBATA;AAUA,KA/GA;AAgHA;AACA,eAjHA,yBAiHA;AACA;AACA,kCADA;AAEA;AACA,6CADA;AAEA,oCAFA;AAGA,2CAHA,GAFA,SAEA,GAFA;;AAOA;AACA;AACA;AACA,mBAVA;;;AAaA,KA/HA;AAgIA;AACA,cAjIA,wBAiIA;AACA;AACA,2BAFA,GAEA,mFAFA;AAGA,mBAHA,GAGA,EAHA;AAIA;AACA,sBADA,GACA,EADA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAdA;AAeA;AACA,yCADA;AAEA,uCAFA,GAfA,SAeA,GAfA;;AAmBA;AACA;AACA;AACA,oCADA;AAEA,kCAFA;;AAIA,mBALA,EAKA,IALA;AAMA;AACA,uCADA;;AAGA,iBA7BA;AA8BA,KA/JA,EAxEA,E;;;;;;;;;;;;;AChGA;AAAA;AAAA;AAAA;AAAgxC,CAAgB,ssCAAG,EAAC,C;;;;;;;;;;;ACApyC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/cart/cart.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/cart/cart.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./cart.vue?vue&type=template&id=0f00adf4&scoped=true&\"\nvar renderjs\nimport script from \"./cart.vue?vue&type=script&lang=js&\"\nexport * from \"./cart.vue?vue&type=script&lang=js&\"\nimport style0 from \"./cart.vue?vue&type=style&index=0&id=0f00adf4&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0f00adf4\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/cart/cart.vue\"\nexport default component.exports","export * from \"-!../../../../../hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=template&id=0f00adf4&scoped=true&\"","var components\ntry {\n  components = {\n    uSticky: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-sticky/u-sticky\" */ \"@/uni_modules/uview-ui/components/u-sticky/u-sticky.vue\"\n      )\n    },\n    uIcon: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-icon/u-icon\" */ \"@/uni_modules/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uImage: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-image/u-image\" */ \"@/uni_modules/uview-ui/components/u-image/u-image.vue\"\n      )\n    },\n    uNumberBox: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-number-box/u-number-box\" */ \"@/uni_modules/uview-ui/components/u-number-box/u-number-box.vue\"\n      )\n    },\n    uButton: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-button/u-button\" */ \"@/uni_modules/uview-ui/components/u-button/u-button.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.isEdit = !_vm.isEdit\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<view v-if=\"showFlog\">\r\n\t\t<u-sticky customNavHeight=\"0\">\r\n\t\t\t<view>\r\n\t\t\t\t<view class=\"y-system-height bg-white\"></view>\r\n\t\t\t\t<view class=\"bg-white y-flex y-font-size-26 y-p-y-20 y-p-x-30 y-align-center y-justify-between\">\r\n\t\t\t\t\t<view class=\"w-90 y-flex y-justify-end\" @click=\"isEdit = !isEdit\">\r\n\t\t\t\t\t\t<span v-if=\"!isEdit\">编辑</span>\r\n\t\t\t\t\t\t<span v-else>取消</span>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"y-weight-bold y-font-size-32\">\r\n\t\t\t\t\t\t购物车\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"w-90\"></view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</u-sticky>\r\n\t\t<view>\r\n\t\t\t<view class=\"store-list y-p-30\">\r\n\t\t\t\t<view class=\"bg-white store-single y-p-30 y-m-b-30 y-radius-30\" v-for=\"(storeItem, storeIndex) in shoppingCart\" :key=\"storeIndex\">\r\n\t\t\t\t\t<view @click=\"storeSelBtn(storeIndex)\" class=\"store-header y-flex y-align-center\">\r\n\t\t\t\t\t\t<view class=\"sel-btn y-p-t-5\">\r\n\t\t\t\t\t\t\t<u-icon v-if=\"(storeItem.isBuySelect && !isEdit) || (storeItem.isDelSelect && isEdit)\" name=\"checkmark-circle-fill\" color=\"#04BE02\" size=\"40rpx\"></u-icon>\r\n\t\t\t\t\t\t\t<view v-else class=\"no-select\"></view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<span class=\"y-font-size-30 y-m-l-13 y-m-r-10\">{{storeItem.storeName}}</span>\r\n\t\t\t\t\t\t<u-icon name=\"arrow-right\"></u-icon>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"goods-list y-p-l-20\">\r\n\t\t\t\t\t\t<view class=\"goods-item y-flex y-p-t-20\" v-for=\"(goodsItem, goodsIndex) in storeItem.goodsList\" :key=\"goodsIndex\">\r\n\t\t\t\t\t\t\t<view @click=\"goodsSelBtn(storeIndex, goodsIndex)\" class=\"y-flex y-align-center\">\r\n\t\t\t\t\t\t\t\t<view class=\"sel-btn\">\r\n\t\t\t\t\t\t\t\t\t<u-icon v-if=\"(goodsItem.isBuySelect && !isEdit) || (goodsItem.isDelSelect && isEdit)\" name=\"checkmark-circle-fill\" color=\"#04BE02\" size=\"40rpx\"></u-icon>\r\n\t\t\t\t\t\t\t\t\t<view v-else class=\"no-select\"></view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"y-m-l-15\">\r\n\t\t\t\t\t\t\t\t<u-image :src=\"goodsItem.image\" radius=\"10rpx\" width=\"162rpx\" height=\"162rpx\"></u-image>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"y-m-l-28 y-flex y-flex-1 y-flex-column\">\r\n\t\t\t\t\t\t\t\t<view class=\"y-flex-1\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"goods-name y-font-size-28\"> {{goodsItem.goodsName}} </view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"goods-price y-flex y-align-end y-flex-1\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"y-flex-1 y-font-size-30 y-weight-bold color-price\"> ￥{{goodsItem.price}} </view>\r\n\t\t\t\t\t\t\t\t\t<view> \r\n\t\t\r\n\t\t\t\t\t\t\t\t\t\t<u-number-box v-model=\"goodsItem.count\" v-bind:disabled=\"numDisabled\" @minus=\"numBoxMinus(goodsIndex)\" @plus=\"numBoxPlus(goodsIndex)\"></u-number-box>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view style=\"height: 120rpx;\"></view>\r\n\t\t</view>\r\n\t\t<!-- #ifdef H5 -->\r\n\t\t<view class=\"y-position-fixed y-bottom-position y-left-0 y-right-0 y-p-y-20 y-p-x-30 bg-white y-flex\">\r\n\t\t<!-- #endif -->\r\n\t\t<!-- #ifdef MP-WEIXIN -->\r\n\t\t<view class=\"y-position-fixed y-bottom-0 y-left-0 y-right-0 y-p-y-20 y-p-x-30 bg-white y-flex\">\r\n\t\t<!-- #endif -->\r\n\t\t\t<view class=\"y-flex y-flex-1 y-align-center\">\r\n\t\t\t\t<view @click=\"allSelBtn()\" class=\"store-header y-flex y-align-center\">\r\n\t\t\t\t\t<view class=\"sel-btn y-p-t-5\">\r\n\t\t\t\t\t\t<u-icon v-if=\"allSelState\" name=\"checkmark-circle-fill\" color=\"#04BE02\" size=\"40rpx\"></u-icon>\r\n\t\t\t\t\t\t<view v-else class=\"no-select\"></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<span class=\"y-font-size-28 y-m-l-10\">全选</span>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"y-flex y-align-center y-font-size-28\">\r\n\t\t\t\t<view v-if=\"!isEdit\" class=\"y-font-size-33\"> 总计: <span class=\"color-price y-weight-bold y-m-l-8\">￥ {{totalPrice}} </span> </view>\r\n\t\t\t\t<view class=\"y-flex y-m-l-25\">\r\n\t\t\t\t\t<u-button v-if=\"!isEdit\" shape=\"circle\" :hairline=\"false\" :customStyle=\"submitBtnStyle\" @click=\"totalGoods()\"> 结算( {{totalSelCount}} ) </u-button>\r\n\t\t\t\t\t<u-button v-else shape=\"circle\" :hairline=\"false\" :customStyle=\"submitBtnStyle\" @click=\"deleteGoods()\"> 删除( {{totalSelCount}} ) </u-button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t</view>\t\r\n\t\t<view v-else class=\"cart-container\">\r\n\t\t\t\t<view class=\"cart-empty\">\r\n\t\t\t\t\t<image src=\"../../static/image/none_shop.png\" class=\"empty-img\">\r\n\t\t\t\t\t\t<view class=\"ns-text-color-gray\">\r\n\t\t\t\t\t\t\t<text>购物车空空如也!</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</div>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport initApp from '@/utils/weixinInit.js'\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tisEdit: false, //是否编辑（购物/编辑）\r\n\t\t\t\tshoppingCart: [],//购物车数据\r\n\t\t\t\tnumDisabled: false,//步进器禁用状态\r\n\t\t\t\tsubmitBtnStyle: {\r\n\t\t\t\t\tbackground: '#FD7026',\r\n\t\t\t\t\tcolor: '#ffffff',\r\n\t\t\t\t\tborder: 'none'\r\n\t\t\t\t},//结算、删除按钮的样式\r\n\t\t\t\tshowFlog:true //如果购物车为空，则显示购物车为空\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed:{\r\n\t\t\t//是否已经全部选中\r\n\t\t\tallSelState(){\r\n\t\t\t\tlet buyAllSelect = true // 购物全选\r\n\t\t\t\tlet delAllSelect = true // 编辑全选\r\n\t\t\t\tthis.shoppingCart.forEach(sitem=>{\r\n\t\t\t\t\tsitem.goodsList.forEach(gitem=>{\r\n\t\t\t\t\t\tif(!gitem.isBuySelect) buyAllSelect = false;\r\n\t\t\t\t\t\tif(!gitem.isDelSelect) delAllSelect = false;\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\tif(!this.isEdit) return buyAllSelect;\r\n\t\t\t\telse return delAllSelect;\r\n\t\t\t},\r\n\t\t\t//总价格\r\n\t\t\ttotalPrice(){\r\n\t\t\t\tlet totalPrice = 0\r\n\t\t\t\tthis.shoppingCart.forEach(sitem=>{\r\n\t\t\t\t\tsitem.goodsList.forEach(gitem=>{\r\n\t\t\t\t\t\tif(gitem.isBuySelect){\r\n\t\t\t\t\t\t\ttotalPrice = totalPrice*1 + gitem.price*gitem.count\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\treturn totalPrice\r\n\t\t\t},\r\n\t\t\t//当前操作下选中的数量\r\n\t\t\ttotalSelCount(){\r\n\t\t\t\tlet buyCount = 0 // 购物全选\r\n\t\t\t\tlet delCount = 0 // 编辑全选\r\n\t\t\t\tthis.shoppingCart.forEach(sitem=>{\r\n\t\t\t\t\tsitem.goodsList.forEach(gitem=>{\r\n\t\t\t\t\t\tif(gitem.isBuySelect){\r\n\t\t\t\t\t\t\tbuyCount = buyCount*1 + gitem.count\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(gitem.isDelSelect){\r\n\t\t\t\t\t\t\tdelCount = delCount*1 + 1\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\tif(!this.isEdit){\r\n\t\t\t\t\treturn buyCount\r\n\t\t\t\t} else{\r\n\t\t\t\t\treturn delCount\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/*\r\n\t\tonLoad只加载一次，监听页面加载，其参数为上个页面传递的数据，参数类型为Object（用于页面传参）\r\n\t\tonshow监听页面显示。页面每次出现在屏幕上都触发，包括从下级页面点返回露出当前页面。\r\n\t\t*/\r\n\t\tonShow() {\r\n\t\t\t/*先清除购物车缓存数据，再获取数据*/\r\n\t\t\tthis.shoppingCart = []\r\n\t\t\t/*进行登录验证判断*/\r\n\t\t\tconst result = initApp()\r\n\t\t\tresult ? this.getData() : ''\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t//请求数据\r\n\t\t\t//我这里只有一家店铺，所以给shoppingCart设置一个索引\r\n\t\t\t\tasync getData(){\r\n\t\t\t\t\tconst res = await this.$myRequest({\r\n\t\t\t\t\t\turl: '/api/shop/list'\r\n\t\t\t\t\t})\r\n\t\t\t\t\tlet goodsList = []\r\n\t\t\t\t\t/*设置显示的内容*/\r\n\t\t\t\t\tres.length && res.length > 0 ? this.showFlog = true : this.showFlog = false\r\n\t\t\t\t\tif(res.length){\r\n\t\t\t\t\t\tres.map((item,index)=>{\r\n\t\t\t\t\t\t\tlet obj = {\r\n\t\t\t\t\t\t\t\tid: item.s_id,\r\n\t\t\t\t\t\t\t\tshop_id: item.shop_id,\r\n\t\t\t\t\t\t\t\tgoodsName: item.good_name,\r\n\t\t\t\t\t\t\t\timage: this.$url + JSON.parse(item.good_pic)[0],\r\n\t\t\t\t\t\t\t\tprice: item.new_price, \r\n\t\t\t\t\t\t\t\tcount: item.count,\r\n\t\t\t\t\t\t\t\tisDelSelect: false,\r\n\t\t\t\t\t\t\t\tisBuySelect: false,\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tgoodsList.push(obj)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\tthis.shoppingCart.push({\r\n\t\t\t\t\t\tid: 1,\r\n\t\t\t\t\t\tstoreName: '万能商城',\r\n\t\t\t\t\t\tisDelSelect: false,\r\n\t\t\t\t\t\tisBuySelect: false,\r\n\t\t\t\t\t\tgoodsList: goodsList\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//商家的选中与否\r\n\t\t\tstoreSelBtn(storeIndex){\r\n\t\t\t\tif(!this.isEdit){ //购物\r\n\t\t\t\t\tthis.shoppingCart[storeIndex].isBuySelect = !this.shoppingCart[storeIndex].isBuySelect\r\n\t\t\t\t\tthis.shoppingCart[storeIndex].goodsList.forEach(item=>{\r\n\t\t\t\t\t\titem.isBuySelect = this.shoppingCart[storeIndex].isBuySelect\r\n\t\t\t\t\t})\r\n\t\t\t\t}else{//编辑\r\n\t\t\t\t\tthis.shoppingCart[storeIndex].isDelSelect = !this.shoppingCart[storeIndex].isDelSelect\r\n\t\t\t\t\tthis.shoppingCart[storeIndex].goodsList.forEach(item=>{\r\n\t\t\t\t\t\titem.isDelSelect = this.shoppingCart[storeIndex].isDelSelect\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//商品的选中与否\r\n\t\t\tgoodsSelBtn(storeIndex, goodsIndex){\r\n\t\t\t\tif(!this.isEdit){ //购物\r\n\t\t\t\t\tthis.shoppingCart[storeIndex].goodsList[goodsIndex].isBuySelect = !this.shoppingCart[storeIndex].goodsList[goodsIndex].isBuySelect\r\n\t\t\t\t\tlet allIsSel = true //是否已经全部选中\r\n\t\t\t\t\tthis.shoppingCart[storeIndex].goodsList.forEach(item=>{\r\n\t\t\t\t\t\tif(!item.isBuySelect){\r\n\t\t\t\t\t\t\tallIsSel = false\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.shoppingCart[storeIndex].isBuySelect = allIsSel\r\n\t\t\t\t}else{//编辑\r\n\t\t\t\t\tthis.shoppingCart[storeIndex].goodsList[goodsIndex].isDelSelect = !this.shoppingCart[storeIndex].goodsList[goodsIndex].isDelSelect\r\n\t\t\t\t\tlet allIsSel = true //是否已经全部选中\r\n\t\t\t\t\tthis.shoppingCart[storeIndex].goodsList.forEach(item=>{\r\n\t\t\t\t\t\tif(!item.isDelSelect){\r\n\t\t\t\t\t\t\tallIsSel = false\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.shoppingCart[storeIndex].isDelSelect = allIsSel\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//全选\r\n\t\t\tallSelBtn(){\r\n\t\t\t\tlet toState = !this.allSelState\r\n\t\t\t\tif(!this.isEdit){//购物\r\n\t\t\t\t\tthis.shoppingCart.forEach(sitem=>{\r\n\t\t\t\t\t\tsitem.isBuySelect = toState\r\n\t\t\t\t\t\tsitem.goodsList.forEach(gitem=>{\r\n\t\t\t\t\t\t\tgitem.isBuySelect = toState\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t}else{//编辑\r\n\t\t\t\t\tthis.shoppingCart.forEach(sitem=>{\r\n\t\t\t\t\t\tsitem.isDelSelect = toState\r\n\t\t\t\t\t\tsitem.goodsList.forEach(gitem=>{\r\n\t\t\t\t\t\t\tgitem.isDelSelect = toState\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//步进器增\r\n\t\t\tasync numBoxPlus(id){\r\n\t\t\t\tthis.numDisabled = true\r\n\t\t\t\tconst res = await this.$myRequest({\r\n\t\t\t\t\turl: '/api/shop/num',\r\n\t\t\t\t\tmethod:'post',\r\n\t\t\t\t\tdata:{s_id:this.shoppingCart[0].goodsList[id].id,count:(this.shoppingCart[0].goodsList[id].count)+1}\r\n\t\t\t\t})\r\n\t\t\t\tif(res.data.code==200){\r\n\t\t\t\t\tthis.numDisabled = false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//步进器减\r\n\t\t\tasync numBoxMinus(id){\r\n\t\t\t\tthis.numDisabled = true\r\n\t\t\t\tconst res = await this.$myRequest({\r\n\t\t\t\t\turl: '/api/shop/num',\r\n\t\t\t\t\tmethod:'post',\r\n\t\t\t\t\tdata:{s_id:this.shoppingCart[0].goodsList[id].id,count:(this.shoppingCart[0].goodsList[id].count)===0?(this.shoppingCart[0].goodsList[id].count):(this.shoppingCart[0].goodsList[id].count)-1}\r\n\t\t\t\t})\r\n\t\t\t\tif(res.data.code==200){\r\n\t\t\t\t\tthis.numDisabled = false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//批量删除商品\r\n\t\t\tdeleteGoods(){\r\n\t\t\t\tthis.shoppingCart[0].goodsList.map(async (item,index)=>{\r\n\t\t\t\t\tif(item.isDelSelect){\r\n\t\t\t\t\t\tconst res = await this.$myRequest({\r\n\t\t\t\t\t\t\turl: '/api/shop/delete',\r\n\t\t\t\t\t\t\tmethod:'post',\r\n\t\t\t\t\t\t\tdata:{id:item.id}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tif(res.data.code==200){\r\n\t\t\t\t\t\t\t/*后台删除成功后,将该item从本地数据中删除*/\r\n\t\t\t\t\t\t\tthis.shoppingCart[0].goodsList.splice(index,1)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//全选商品\r\n\t\t\tasync totalGoods(){\r\n\t\t\t\t/*一定要多用filter函数*/\r\n\t\t\t\tlet checkedlist = this.shoppingCart[0].goodsList.filter(item => item.isBuySelect)\r\n\t\t\t\tvar arr = [];\r\n\t\t\t\tfor(var i=0;i<checkedlist.length;i++){\r\n\t\t\t\t\tvar item = [];\r\n\t\t\t\t\titem.push(checkedlist[i].shop_id)\r\n\t\t\t\t\titem.push(checkedlist[i].id);\r\n\t\t\t\t    item.push(checkedlist[i].count);\r\n\t\t\t\t\tconsole.log(checkedlist[i])\r\n\t\t\t\t\tarr.push(item);\r\n\t\t\t\t}\r\n\t\t\t    /*将二维数组转成json格式*/ \r\n\t\t\t\tarr = JSON.stringify(arr)\r\n\t\t\t\t/**/\r\n\t\t\t\tconst res = await this.$myRequest({\r\n\t\t\t\t\turl: '/api/pay/order',\r\n\t\t\t\t\tdata:{list:arr}\r\n\t\t\t\t})\r\n\t\t\t\tif(res.data.code==200){\r\n\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '结算成功!',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t},1000)\r\n\t\t\t\t\tuni.switchTab({\r\n\t\t\t\t\t\turl:'/pages/me/me'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.w-90{\r\n\t\twidth: 90rpx;\r\n\t}\r\n\t.sel-btn{\r\n\t\twidth: 45rpx;\r\n\t\theight: 45rpx;\r\n\t}\r\n\t.no-select{\r\n\t\twidth: 39rpx;\r\n\t\theight: 39rpx;\r\n\t\tborder-radius: 50%;\r\n\t\tborder: 1px solid rgb(235, 236, 238);\r\n\t}\r\n\t/*无值页面*/\r\n\t.cart-container{\r\n\t\tbox-sizing: border-box;\r\n\t\tposition: relative;\r\n\t\tdisplay: flex;\r\n\t\twidth:100vw;\r\n\t\theight:80vh;\r\n\t\tjustify-content:center;\r\n\t\talign-items:center;\r\n\t    .cart-empty{\r\n\t\t    text-align: center;\r\n\t\t    font-size: 10px;\r\n\t\t    padding: 0 10px;\r\n\t\t\t\t  .empty-img{\r\n\t\t\t\t\t  width:100px;\r\n\t\t\t\t\t  height:50px;\r\n\t\t\t\t\t  margin: 20px auto 10px auto;\r\n\t\t\t\t  }\r\n\t\t\t\t  .ns-text-color-gray{\r\n\t\t\t\t      color: #898989!important;\r\n\t\t\t\t  }\r\n\t\t        }\r\n\t\t}\r\n</style>\n","import mod from \"-!../../../../../hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=style&index=0&id=0f00adf4&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=style&index=0&id=0f00adf4&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1663730788120\n      var cssReload = require(\"D:/hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}